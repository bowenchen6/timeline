# 发布 - 订阅消息模型(Pub/Sub)
1. 引用维基百科的说法：发送方（发布者）没有编程发送信息给特定的接收方（订阅者），发布者发送的消息会发布到消息通道里，并不需要知道有谁（或者没有）订阅它们。订阅者可以订阅一个或者多个消息通道，通过消息通道接收消息，并不需要知道消息的发布者（或者没有）。
2. 发布者和订阅者的解耦可以允许系统拥有更大的可扩展性和更加动态的网络拓扑结构。
3. 在Redis中主要通过以下几条命令实现Pub/Sub的功能：
  - SUBSCRIBE： 这个命令用来订阅一个或者多个消息通道。
  - PSUBSCRIBE：这个命令用来订阅通过模式匹配来订阅的消息通道。
  - UNSUBSCRIBE： 这个命令用来取消订阅一个或者多个消息通道。
  - PUNSUBSCRIBE： 这个命令用来取消订阅通过模式匹配来订阅的消息通道。
  - PUBLISH：这个命令用来发布消息到消息通道里。
  - PUBSUB：这个命令用来检查的Pub/Sub系统的状态。
  - PING: 这个命令经常被用来测试连接是否还存在，或者测量延迟。
  - QUIT：这个命令用来请求服务器关闭连接。
4. Pub/Sub的功能实际是没有任何持久化支持的，订阅者连接闪断或重连之间过来的消息是会全部丢失的。

## 订阅者订阅和取消订阅消息通道
1. 订阅者可以根据消息通道的名称订阅消息通道，发布者发布到这些消息通道的消息会被Redis推送给订阅消息通道的订阅者。
  -　SUBSCRIBE foo bar
2. 订阅者可以根据消息通道的名称取消订阅消息通道，如果不加任何参数，表示取消订阅已经订阅的所有消息通道。
  - UNSUBSCRIBE foo
  - UNSUBSCRIBE
3. 订阅者可以根据一个正则匹配的模式匹配消息通道名称的方式来订阅消息通道。
  - PSUBSCRIBE news.*
4. 订阅者可以根据一个正则匹配的模式匹配消息通道名称的方式来取消订阅消息通道。
  - PUNSUBSCRIBE news.*
5. 订阅和取消订阅的操作的结果会以消息的格式被发送到消息通道里面，所以订阅者可以读取关联的消息通道里面的消息，来获取结果，其中消息的第一个元素指示消息的类型。
6. 订阅一个或多个消息通道的订阅者不应该发布消息，尽管它可以订阅并取消订阅其他消息通道。
7. 在Redis Pub/Sub的上下文中，已经订阅消息通道的订阅者可以使用的命令有SUBSCRIBE, PSUBSCRIBE, UNSUBSCRIBE, PUNSUBSCRIBE, PING 和 QUIT。
8. 当订阅者订阅的消息通道和模式匹配的消息通道的总数下降到零，它就会退出Redis Pub/Sub的上下文，这时候就没有使用命令的限制。

## 发布者发布消息
发布者能够发送一个消息到一个给定的消息通道。
  - PUBLISH second Hello

## 消息通道里面的消息类型
消息类型是包含三个或者四个元素的以RESP数组的形式。
消息内容的第一个元素可能的值：
  - subscribe: 表示成功订阅，这种情况下第二个元素是订阅的消息通道的名称，第三个元素代表当前订阅者订阅的消息通道的数量。
  - unsubscribe: 表示成功取消订阅，这种情况下第二个元素是订阅的消息通道的名称，第三个元素代表当前订阅者订阅的消息通道的数量。
  - message: 表示接受到消息通道发送的消息，这种情况下第二个元素是发布消息到的消息通道的名称，第三个元素是实际的消息的内容。
  - pmessage：　表示接受到来自模式匹配消息通道发送的消息，这种情况下第二个元素是原始的模式匹配字符串，第三个元素是发布消息到的消息通道的名称，最后一个元素是实际的消息的内容。

## 额外
所有的详细信息可以查看[document](https://redis.io/topics/pubsub)
[Redis及其产品定位](http://www.infoq.com/cn/articles/tq-why-choose-redis）
